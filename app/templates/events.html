{% extends "base.html" %}

{% block app_content %}
    <div class="main-page">
        <div class="page-content">
            <div class="form-wrapper">
                <form name="main-form" id="main-form">
                    <h2>Spell Components</h2>
                    <label for="activity"><u>Activity</u></label>
                    <br>
                    <input type="text" name="activity" id="activity"
                        onkeyup="advancedSearch()"
                        placeholder="Activity Name"
                        value="{{ request.form['activity'] }}"></input>
                    <br>
                    <br>

                    <label for="location"><u>Location</u></label>
                    <br>
                    <input type="text" name="location" id="location"
                        onkeyup="advancedSearch()"
                        placeholder="Location Name"
                        value="{{ request.form['location'] }}"></input>
                    <br>
                    <label for="range">within</label>
                    <br>
                    <input type="range" min="1" max="100" value="100" class="slider" name="withinRange" id="withinRange" oninput="this.nextElementSibling.value = this.value">
                    <output>100</output>
                    <label for="miles">miles</label>
                    <br>
                    <br>

                    <label for="type"><u>Event Type</u></label>
                    <br>
                    <input type="text" name="type" id="type"
                        onkeyup="advancedSearch()"
                        placeholder="Type (DnD, Pokemon, etc.)"
                        value="{{ request.form['type'] }}"></input>
                    <br>
                    <br>

                    <label for="category"><u>Category</u></label>
                    <br>
                    <input type="checkbox" id="localCheckbox" onclick="advancedSearch()">
                    <label for="category">Local</label>
                    <input type="checkbox" id="minorCheckbox" onclick="advancedSearch()">
                    <label for="category">Minor</label>
                    <input type="checkbox" id="majorCheckbox" onclick="advancedSearch()">
                    <label for="category">Major</label>
                    <br>
                    <br>

                    <label for="range"><u>Price</u></label>
                    <br>
                    <input type="range" min="0" max="100" value="100" class="slider" id="price" oninput="this.nextElementSibling.value = this.value" onclick="advancedSearch()">
                    <output>100</output><p>dollars</p>
                    <br>

                    <button type="reset" onclick="clearFields()">Reset</button>
                    <br>
                </form>
                <div class="showhide-wrapper">
                    <a id="hide-button" onclick="hideSearch()">Hide Advanced Search</a>
                    <a id="show-button" onclick="showSearch()">Show Advanced Search</a>
                </div>
            </div>
            <div id="pageData">
                {% for piece in data %}
                    <div class="event">
                        <h2>{{ piece.Name }}</h2>
                        <small>Location: <b>{{ piece.Location }}</b></small>
                        <br>
                        <small>Type: <b>{{ piece.Type if piece.Type else 'Not listed' }}</b></small>
                        <br>
                        <small>Category: <b>{{ piece.Event_Cat if piece.Event_Cat else 'Not listed'}}</b></small>
                        <br>
                        <small>Price: {{ '$' if piece.Price }}<b>{{ piece.Price if piece.Price else 'Free' }}</b></small>
                    </div>
                {% endfor %}
                <div id="no-results">No results found</div>
            </div>
            <div id="myModal" class="modal">
	
				<!-- The Close Button -->
				<span class="close">&times;</span>
			
				<!-- Modal Content (Event Info) -->
				<div id="modal-content">

                </div>
			</div>
        </div>
        <script type="text/javascript" src="{{ url_for('static', filename='index.js') }}"></script>
        {% if (query != '') %}
            <script type="text/javascript">
                const queryString = window.location.search;
                const urlParams = new URLSearchParams(queryString);
                const query = urlParams.get('query');
                console.log(query);
                quickSearch(query);
            </script>
        {% endif %}
    </div>
{% endblock %}